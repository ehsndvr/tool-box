/*const Discord = require('discord.js');
const client = new Discord.Client();
const fs = require('fs');
const ms = require('ms');
const { send, config } = require('process');
const json_log = require('./log.json')
const json_role_log = require('./role_log.json')
const prefix = "8";
client.commands = new Discord.Collection();
const commandFiles = fs.readdirSync('./commands').filter(file => file.endsWith('.js'));

for (const file of commandFiles) {
  const command = require(`./commands/${file}`);
  client.commands.set(command.name, command);
}
client.on('ready', () => {

  //const server_count = client.guilds.cache.;
  client.user.setStatus('online')
  console.log(`Logged in as  TOOL-BOX In ${client.guilds.cache.size} Server!`)
  console.log(`Logged in as ${client.user.tag}!`);//${client.guilds.cache.keyArray()}`);
  client.user.setActivity('Ø¬Ø¹Ø¨Ù‡ Ø§Ø¨Ø²Ø§Ø± | TOOL-BOX', { type: "PLAYING" });
  /*let status_num = 0
  setInterval(function () {
    if (status_num == 0) {
      client.user.setActivity(`Ø¬Ø¹Ø¨Ù‡ Ø§Ø¨Ø²Ø§Ø± | TOOL-BOX In ${client.guilds.cache.size} Servers`, { type: "PLAYING" })
      status_num += 1;
    }
    else {
      client.user.setActivity('Ø¬Ø¹Ø¨Ù‡ Ø§Ø¨Ø²Ø§Ø± | TOOL-BOX', { type: "PLAYING" });
      status_num = 0;
    }
  }, 3000);
});

client.on("message", msg => {
  //this code for mafia god only


  if (msg.author.id === client.user.id) {
    return;
  }
  if (!msg.content.startsWith(`${prefix}`)) {
    return;
  }
  const args = msg.content.slice(prefix.length).trim().split(' ');
  const command = args.shift().toLowerCase();
  let cmd = client.commands.get(`${command}`);
  if (cmd) {
    cmd.execute(msg , json_role_log, json_log, client);
  }

});
client.on('guildCreate', guild => {
  const embed = new Discord.MessageEmbed()
    .setTitle('ğŸŒ¸ Ø¨Ø±Ø§ÛŒ Ø´Ù…Ø§ Ú©Ù‡ Ù„Ø§ÛŒÙ‚ Ø¨Ù‡ØªØ±ÛŒÙ†â€ŒÙ‡Ø§ Ù‡Ø³ØªÛŒØ¯ ğŸŒ¸')
    .setColor(0x34eb9e)
    .addFields(
      { name: `Ø¢Ù‚Ø§ / Ø®Ø§Ù†Ù… ${guild.owner.user.username}`, value: '```Ø¨Ø§ ØªØ´Ú©Ø± Ø§Ø² Ø´Ù…Ø§ Ú©Ù‡ Ø¨Ø§Øª Ù…Ø§Ø±Ùˆ Ø¨Ù‡ Ø®Ø§Ù†ÙˆØ§Ø¯Ù‡ Ú¯Ø±Ù… Ø®ÙˆØ¯ØªÙˆÙ† Ø±Ø§Ù‡ Ø¯Ø§Ø¯ÛŒØ¯ ØŒ ØªØ§ Ø¨Ø§Ù‡Ù… Ú©Ù„ÛŒ Ø®Ø§Ø·Ø±Ù‡ Ù‡Ø§ÛŒ Ø®ÙˆØ¨ Ø¨Ø³Ø§Ø²ÛŒÙ… ```' },
      { name: 'Ú†Ú¯ÙˆÙ†Ù‡ Ø§Ø² Ø¨Ø§Øª Ø§Ø³ØªÙØ§Ø¯Ù‡ Ú©Ù†Ù… ØŸ ', value: '``` Ù„Ø·ÙØ§ Ø¨Ø±Ø§ÛŒ Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø§Ø² Ø¨Ø§Øª Ø§Ø² Ø¯Ø³ØªÙˆØ± Ú©Ù…Ú© Ø§Ø³ØªÙØ§Ø¯Ù‡ Ú©Ù†ÛŒØ¯ ```' },
      { name: 'Bot Prefix', value: '```8 help```' },
      { name: 'Ø§Ø±ØªØ¨Ø§Ø· Ø¨Ø§ Ù…Ø§', value: 'Ù‡Ù…Ú†Ù†ÛŒÙ†  Ø¨Ø±Ø§ÛŒ Ø§Ø±ØªØ¨Ø§Ø· Ø¨Ø§ Ù…Ø§ Ù…ÛŒØªÙˆÙ†ÛŒØ¯ Ø¨Ù‡ Ù„ÛŒÙ†Ú© Ø²ÛŒØ± Ù…Ø±Ø§Ø¬Ø¹Ù‡ Ø¨ÙØ±Ù…Ø§ÛŒÛŒØ¯' },
      { name: 'TOOL-BOX Server Link', value: 'https://discord.gg/Xw2eW2h' }
    )
  guild.members.cache.get(guild.ownerID).send(embed)
  guild.roles.create({ data: { name: 'ğŸ”° TOOL-BOX ğŸ”°', color: '0x34eb7d', permissions: ['MUTE_MEMBERS', 'SEND_MESSAGES', 'CONNECT', 'SPEAK', 'MANAGE_CHANNELS'] } });
  new Discord.WebhookClient('753675412986396782', 'RjkN9eRUMpaZD-6jnRUC66HkayAbehk8Yf1C5SVE1Olvmz6fxoXpdgqybUSgJDH_vHJD').send(`Bot joined **${guild.name}**, bot in **${client.guilds.cache.size}** servers`)
});

client.on('guildDelete', guild =>{
  new Discord.WebhookClient('753675412986396782', 'RjkN9eRUMpaZD-6jnRUC66HkayAbehk8Yf1C5SVE1Olvmz6fxoXpdgqybUSgJDH_vHJD').send(`Bot left **${guild.name}**, bot in **${client.guilds.cache.size}**`)
});

client.login("NzUwNzM0NjkwMTYzNDkwODY2.X0-2Kg.XMrcvcvDRhGU-19nGPyrQp8r6J4");
*/
/*if (command !== 'help' || command !== 'rule' || command !== 'ping' || command !== 'insta' || command !== 'covid' || command !== 'covidco' || command !== 'join') {
    if (!msg.member.roles.cache.find(r => r.name === "ğŸ”° TOOL-BOX ğŸ”°")) {
      const embed = new Discord.MessageEmbed()
        .setColor(0xffff99)
        .setFooter(` Ù¾ÛŒØ§Ù… Ø§ÛŒØ¬Ø§Ø¯ Ø´Ø¯ ØªÙˆØ³Ø· ${msg.author.username}`, msg.author.displayAvatarURL())
        .addField('ÙÙ‚Ø· Ú©Ø³ÛŒ Ú©Ù‡ Ø±ÙˆÙ„ `ğŸ”° TOOL-BOX ğŸ”°` Ù…ÛŒØªÙˆØ§Ù†Ø¯ Ø§Ø² Ø§ÛŒÙ† Ø¯Ø³ØªÙˆØ± Ø§Ø³ØªÙØ§Ø¯Ù‡ Ú©Ù†Ø¯', 'Ù„Ø·ÙØ§ Ø§Ø² Ø±ÙˆÙ„ÛŒ Ú©Ù‡ Ø¨Ø§Øª Ø³Ø§Ø®ØªÙ‡ Ø§Ø³ØªÙØ§Ø¯Ù‡ Ú©Ù†ÛŒØ¯')
      return msg.channel.send(embed);
    }
    if (!msg.member.hasPermission("MUTE_MEMBERS")) {
      const embed = new Discord.MessageEmbed()
        .setTitle('Ø´Ù…Ø§ Ù†Ù…ÛŒØªÙˆØ§Ù†ÛŒØ¯ Ø§Ø² Ø¨Ø§Øª Ø§Ø³ØªÙØ§Ø¯Ù‡ Ú©Ù†ÛŒØ¯')
        .setColor(0xff0000)
      return msg.channel.send(embed)
    }
  }*/

const Discord = require('discord.js');
const client = new Discord.Client();
const fs = require('fs');
const ms = require('ms');
const { send, config } = require('process');
const json_log = require('./log.json')
const json_role_log = require('./role_log.json')
client.commands = new Discord.Collection();
const commandFiles = fs.readdirSync('./commands').filter(file => file.endsWith('.js'));

for (const file of commandFiles) {
  const command = require(`./commands/${file}`);
  client.commands.set(command.name, command);
}
client.on('ready', () => {
  /*let i = 1;
  client.guilds.cache.forEach(server => {
    console.log(i + " " + server.name + " | " + server.id + " | ", server.owner.user.tag);
    i++;
  });
  //const server_count = client.guilds.cache.;
  client.user.setStatus('online')
  console.log(`Logged in as  TOOL-BOX In ${client.guilds.cache.size} Server!`)
  console.log(`Logged in as ${client.user.tag}!`);//${client.guilds.cache.keyArray()}`);
  let status_num = 0
  setInterval(function () {
    if (status_num == 0) {
      client.user.setActivity(`8help For Show Help`, { type: "WATCHING" })
      status_num += 1;
    }
    else if(status_num === 1){
      client.user.setActivity('Ø¬Ø¹Ø¨Ù‡ Ø§Ø¨Ø²Ø§Ø± | TOOL-BOX', { type: "LISTENING" });
      status_num++;
    }
    else{
      client.user.setActivity('8support | Ø¨Ø±Ø§ÛŒ Ù¾Ø´ØªÛŒØ¨Ø§Ù†ÛŒ', { type: "LISTENING" });
      status_num = 0;
    }
  }, 3000);
  //https://discordapp.com/api/webhooks/763759798289956924/y19fLCg6fsDtozj049LAcotIpCUqPdJviNHZX-ayVrGQmzxPG_xiRYbtaKbUbuNng1m_
  //setInterval(function(){new Discord.WebhookClient("764419953204920330", "2HLixBdXhVooaG0ZIutC3wivo8skmJS2mBizlJjFd1_h-r-9sCJidJf0YHaXAUigR4hk").send(new Discord.MessageAttachment('./config.json'))}, ms("1h"))
});
client.on("message", msg => {
  //this code for mafia god only

  if(msg.content === 'TB prefix'){
    return msg.channel.send(new Discord.MessageEmbed().setTitle(`Prefix : ${require('./config.json').prefix[msg.guild.id].prefix}`))
  }
  if(msg.mentions.users.first() && msg.guild.member(msg.mentions.users.first()).id === msg.guild.me.id)
  {
    return msg.channel.send(new Discord.MessageEmbed().setTitle(`Prefix : ${require('./config.json').prefix[msg.guild.id].prefix}`))
  }
  if (msg.author.id === client.user.id) {
    return;
  }
  if (!msg.content.startsWith(`${require('./config.json').prefix.length}`)) {
    return;
  }
  if((require('./config.json').channels_lockdown[msg.guild.id]) !== undefined && !(msg.content.toLowerCase().startsWith("8delete") || msg.content.toLowerCase().startsWith("8delete") || msg.content.toLowerCase().startsWith("8lockdown")) && require('./config.json').channels_lockdown[msg.guild.id].channel_id !== msg.channel.id)
  {
    msg.delete()
    return msg.channel.send(new Discord.MessageEmbed().addField('ERROR', `Ø´Ù…Ø§ Ø¨Ø§ÛŒØ¯ Ø§ÛŒÙ† Ø¯Ø³ØªÙˆØ± Ø±Ø§ Ø¯Ø± ${msg.guild.channels.cache.get(require('./config.json').channels_lockdown[msg.guild.id].channel_id)} Ø§Ø±Ø³Ø§Ù„ Ú©Ù†ÛŒØ¯`).setColor('RANDOM'))
    .then(message => {
      message.delete({timeout: 3000})
    })
  }
  /*if(!msg.guild.me.hasPermission("ADMINISTRATOR"))
  {
    return msg.channel.send(new Discord.MessageEmbed().setTitle('Ú†Ø±Ø§ Ù…Ù† Ù¾Ø±Ù… Ø§Ø¯Ù…ÛŒÙ†ÛŒ Ù†Ø¯Ø§Ø±Ù… ØŸ').setColor('RED'))
  }*/
  const args = msg.content.slice(require('./config.json').prefix.length).trim().split(' ');
  const command = args.shift().toLowerCase();
  let cmd = client.commands.get(`${command}`);
  if (cmd) {
    cmd.execute(msg , json_role_log, json_log, client);
  }

});
client.on('guildCreate', guild => {
  const embed = new Discord.MessageEmbed()
    .setTitle('ğŸŒ¸ Ø¨Ø±Ø§ÛŒ Ø´Ù…Ø§ Ú©Ù‡ Ù„Ø§ÛŒÙ‚ Ø¨Ù‡ØªØ±ÛŒÙ†â€ŒÙ‡Ø§ Ù‡Ø³ØªÛŒØ¯ ğŸŒ¸')
    .setColor(0x34eb9e)
    .addFields(
      { name: `Ø¢Ù‚Ø§ / Ø®Ø§Ù†Ù… ${guild.owner.user.username}`, value: '```Ø¨Ø§ ØªØ´Ú©Ø± Ø§Ø² Ø´Ù…Ø§ Ú©Ù‡ Ø¨Ø§Øª Ù…Ø§Ø±Ùˆ Ø¨Ù‡ Ø®Ø§Ù†ÙˆØ§Ø¯Ù‡ Ú¯Ø±Ù… Ø®ÙˆØ¯ØªÙˆÙ† Ø±Ø§Ù‡ Ø¯Ø§Ø¯ÛŒØ¯ ØŒ ØªØ§ Ø¨Ø§Ù‡Ù… Ú©Ù„ÛŒ Ø®Ø§Ø·Ø±Ù‡ Ù‡Ø§ÛŒ Ø®ÙˆØ¨ Ø¨Ø³Ø§Ø²ÛŒÙ… ```' },
      { name: 'Ú†Ú¯ÙˆÙ†Ù‡ Ø§Ø² Ø¨Ø§Øª Ø§Ø³ØªÙØ§Ø¯Ù‡ Ú©Ù†Ù… ØŸ ', value: '``` Ù„Ø·ÙØ§ Ø¨Ø±Ø§ÛŒ Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø§Ø² Ø¨Ø§Øª Ø§Ø² Ø¯Ø³ØªÙˆØ± Ú©Ù…Ú© Ø§Ø³ØªÙØ§Ø¯Ù‡ Ú©Ù†ÛŒØ¯ ```' },
      { name: 'Bot Prefix', value: '```8 help```' },
      { name: 'Ø§Ø±ØªØ¨Ø§Ø· Ø¨Ø§ Ù…Ø§', value: 'Ù‡Ù…Ú†Ù†ÛŒÙ†  Ø¨Ø±Ø§ÛŒ Ø§Ø±ØªØ¨Ø§Ø· Ø¨Ø§ Ù…Ø§ Ù…ÛŒØªÙˆÙ†ÛŒØ¯ Ø¨Ù‡ Ù„ÛŒÙ†Ú© Ø²ÛŒØ± Ù…Ø±Ø§Ø¬Ø¹Ù‡ Ø¨ÙØ±Ù…Ø§ÛŒÛŒØ¯' },
      { name: 'TOOL-BOX Server Link', value: 'https://discord.gg/Xw2eW2h' }
    )
  guild.members.cache.get(guild.ownerID).send(embed)
  let json_prefix_log = require('./config.json');
  json_prefix_log.prefix[guild.id] = {}
  json_prefix_log.prefix[guild.id].prefix = "8";
  fs.writeFile('./config.json', JSON.stringify(json_prefix_log), function (err) {
    if (err) throw err;
    console.log('complete');
  });
  guild.roles.create({ data: { name: 'ğŸ’¢ á´á´€Ò“Éªá´€É¢á´á´… ğŸ’¢', color: '0xeb3477', permissions: ['MUTE_MEMBERS', 'SEND_MESSAGES', 'CONNECT', 'SPEAK'] } });
  //new Discord.WebhookClient('764419953204920330', '2HLixBdXhVooaG0ZIutC3wivo8skmJS2mBizlJjFd1_h-r-9sCJidJf0YHaXAUigR4hk').send(`Bot joined **${guild.name}**, bot in **${client.guilds.cache.size}** servers`)
});

/*client.on('guildDelete', guild =>{
  let json_prefix_log = require('./config.json')
  delete json_prefix_log[guild.id]
  fs.writeFile('./config.json', JSON.stringify(json_prefix_log), function (err) {
    if (err) throw err;
    console.log('complete');
  });
  new Discord.WebhookClient('764419953204920330', '2HLixBdXhVooaG0ZIutC3wivo8skmJS2mBizlJjFd1_h-r-9sCJidJf0YHaXAUigR4hk').send(`Bot left **${guild.name}**, bot in **${client.guilds.cache.size}**`)
});*/
client.login("NzQ5MDE3MzAyNjA2ODA3MTUw.X0l2uQ.ObiAtql24Ad3SytSJr5Q-vIvGYI");

/*if (command !== 'help' || command !== 'rule' || command !== 'ping' || command !== 'insta' || command !== 'covid' || command !== 'covidco' || command !== 'join') {
    if (!msg.member.roles.cache.find(r => r.name === "ğŸ”° TOOL-BOX ğŸ”°")) {
      const embed = new Discord.MessageEmbed()
        .setColor(0xffff99)
        .setFooter(` Ù¾ÛŒØ§Ù… Ø§ÛŒØ¬Ø§Ø¯ Ø´Ø¯ ØªÙˆØ³Ø· ${msg.author.username}`, msg.author.displayAvatarURL())
        .addField('ÙÙ‚Ø· Ú©Ø³ÛŒ Ú©Ù‡ Ø±ÙˆÙ„ `ğŸ”° TOOL-BOX ğŸ”°` Ù…ÛŒØªÙˆØ§Ù†Ø¯ Ø§Ø² Ø§ÛŒÙ† Ø¯Ø³ØªÙˆØ± Ø§Ø³ØªÙØ§Ø¯Ù‡ Ú©Ù†Ø¯', 'Ù„Ø·ÙØ§ Ø§Ø² Ø±ÙˆÙ„ÛŒ Ú©Ù‡ Ø¨Ø§Øª Ø³Ø§Ø®ØªÙ‡ Ø§Ø³ØªÙØ§Ø¯Ù‡ Ú©Ù†ÛŒØ¯')
      return msg.channel.send(embed);
    }
    if (!msg.member.hasPermission("MUTE_MEMBERS")) {
      const embed = new Discord.MessageEmbed()
        .setTitle('Ø´Ù…Ø§ Ù†Ù…ÛŒØªÙˆØ§Ù†ÛŒØ¯ Ø§Ø² Ø¨Ø§Øª Ø§Ø³ØªÙØ§Ø¯Ù‡ Ú©Ù†ÛŒØ¯')
        .setColor(0xff0000)
      return msg.channel.send(embed)
    }
  }*/ 